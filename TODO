Stabilise enough to write tests

Reduce explicit rules to just the rule name, discover the rest.
- all but variable mappings first
- varmaps are of various complexity:
  - itervar: one variable, only x := e + x, x := e - x, with e independent of x
  - recurse: one variable, only x := x + e, x := ex, with e independent of x
  - induction: one variable
  - specify: one or more variables
  - equate: zero or more variables, target expr at location to be discovered
Remove explicit rules entirely, discover them.
Discover rules even when we take multiple steps.

Performance:
- deriving factor is very slow
- import could just pick up the theorems without validating

Sets, type checking, inequalities, constraints.
- \Aa \e \Z, a > 10: ...

Abstract out knowledge of operators:
- arg number and types, return type
- rules
- constructing the grammar will be hard

